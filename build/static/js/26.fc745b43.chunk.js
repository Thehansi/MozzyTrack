(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[26],{452:function(e,a,t){"use strict";var n=t(30),l=t(11),o=t(12),i=t(16),r=t(17),c=t(37),s=t.n(c),m=t(895),d=t(860),u=t(473),f=(t(457),t(367)),E=t(455),h=function(e){Object(i.a)(t,e);var a=Object(r.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=a.call.apply(a,[this].concat(o))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return Object(o.a)(t,[{key:"render",value:function(){var e,a,t,l,o,i=this,r=[];return this.state.isOption&&(t=s.a.createElement("div",{className:"card-header-right"},s.a.createElement(m.a,{alignRight:!0,className:"btn-group card-option"},s.a.createElement(m.a.Toggle,{id:"dropdown-basic",className:"btn-icon"},s.a.createElement("i",{className:"feather icon-more-horizontal"})),s.a.createElement(m.a.Menu,{as:"ul",className:"list-unstyled card-option"},s.a.createElement(m.a.Item,{as:"li",className:"dropdown-item",onClick:function(){i.setState((function(e){return{fullCard:!e.fullCard}}))}},s.a.createElement("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),s.a.createElement("a",{href:E.a.BLANK_LINK}," ",this.state.fullCard?"Restore":"Maximize"," ")),s.a.createElement(m.a.Item,{as:"li",className:"dropdown-item",onClick:function(){i.setState((function(e){return{collapseCard:!e.collapseCard}}))}},s.a.createElement("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),s.a.createElement("a",{href:E.a.BLANK_LINK}," ",this.state.collapseCard?"Expand":"Collapse"," ")),s.a.createElement(m.a.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler},s.a.createElement("i",{className:"feather icon-refresh-cw"}),s.a.createElement("a",{href:E.a.BLANK_LINK}," Reload ")),s.a.createElement(m.a.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler},s.a.createElement("i",{className:"feather icon-trash"}),s.a.createElement("a",{href:E.a.BLANK_LINK}," Remove ")))))),l=s.a.createElement(d.a.Header,null,s.a.createElement(d.a.Title,{as:"h5"},this.props.title),t),this.state.fullCard&&(r=[].concat(Object(n.a)(r),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(r=[].concat(Object(n.a)(r),["card-load"]),a=s.a.createElement("div",{className:"card-loader"},s.a.createElement("i",{className:"pct-loader1 anim-rotate"}))),this.state.cardRemove&&(r=[].concat(Object(n.a)(r),["d-none"])),this.props.cardClass&&(r=[].concat(Object(n.a)(r),[this.props.cardClass])),o=s.a.createElement(d.a,{className:r.join(" "),style:e},l,s.a.createElement(u.a,{in:!this.state.collapseCard},s.a.createElement("div",null,s.a.createElement(d.a.Body,{style:{backgroundColor:"rgb(185, 210, 214)"}},this.props.children))),a),s.a.createElement(f.a,null,o)}}]),t}(c.Component);a.a=h},569:function(e,a,t){"use strict";var n=t(11),l=t(12),o=t(16),i=t(17),r=t(37),c=t.n(r),s=t(479),m=t(672),d=t(369),u=function(e){Object(o.a)(t,e);var a=Object(i.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).onSelectionChanged=function(e){l.setState({SelectID:e.selectedRowsData[0].AutoID})},l.onSelectClick=function(e){l.props.OnHide(l.state.SelectID)},l.onCloseClick=function(e){l.props.OnHide(0)},l.state={SelectID:0,jList:[]},l}return Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.a.createElement(r.Fragment,null,c.a.createElement(s.a,{size:"xl",show:this.props.Show,onHide:this.onCloseClick,backdrop:"static",keyboard:!1},c.a.createElement(s.a.Header,{closeButton:!0},c.a.createElement(s.a.Title,null,"List of ",this.props.Name)),c.a.createElement(s.a.Body,null,c.a.createElement(d.k,{id:"grid-list",dataSource:this.props.ItemList,keyExpr:"AutoID",showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,selection:{mode:"single"},hoverStateEnabled:!0,onSelectionChanged:this.onSelectionChanged},c.a.createElement(d.j,{visible:!0}),c.a.createElement(d.d,{visible:!0}),c.a.createElement(d.h,{defaultPageSize:20}),c.a.createElement(d.a,{dataField:"AutoID",visible:!1}),c.a.createElement(d.a,{dataField:"Name"}),c.a.createElement(d.a,{dataField:"Module"}),c.a.createElement(d.a,{dataField:"Status"}),c.a.createElement(d.a,{dataField:"Remark"})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(m.a,{variant:"secondary",onClick:this.onSelectClick},"Open"),c.a.createElement(m.a,{variant:"secondary",onClick:this.onCloseClick,icon:"feather icon-layers"},"Close"))))}}]),t}(r.Component);a.a=u},881:function(e,a,t){"use strict";t.r(a),t.d(a,"CommunicationEmail",(function(){return S}));var n=t(108),l=t(11),o=t(12),i=t(16),r=t(17),c=t(37),s=t.n(c),m=t(367),d=t(569),u=t(370),f=t(452),E=t(368),h=t.n(E),p=t(371),g=t(271),N=t(460),C=t.n(N),v=t(482),b=t(672),O=t(272),y=t(380),S=function(e){Object(i.a)(t,e);var a=Object(r.a)(t);function t(e){var o;return Object(l.a)(this,t),(o=a.call(this,e)).onModuleValueChanged=function(e){e.value&&!o.state.DataLoading&&h.a.get("/api/module-field",{params:{ModuleID:e.value}}).then((function(e){o.setState({jlField:JSON.parse(e.data[0].Fields)})})).catch((function(e){console.log(e)}))},o.onFieldValueChanged=function(e){e.value&&(o.state.MailBody=o.state.MailBody+" #@"+e.value+"# ",o.setState({MailBody:o.state.MailBody}),console.log("mail strate",e.value))},o.OnSaveValidation=function(){return!!o.FormLayout.validate().isValid||(o.OnNotification("Fields marked with * are required","error"),!1)},o.OnClickEvent=function(e){o.OnSaveValidation()&&C.a.fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){e.value?o.setState({LoadPanelVisible:!0},(function(){o.setState((function(e){return{jEmail:Object(n.a)(Object(n.a)({},e.jEmail),{},{Message:o.state.MailBody})}})),o.state.jEmail.Message=o.state.MailBody,console.log("issue",o.state),o.serverRequest=h.a.post("/api/email",{EmailID:o.state.EmailID,Email:JSON.stringify(o.state.jEmail)}).then((function(e){console.log("response ",e),o.onLoadPanelHiding("Successfully Saved","success"),o.OnClearForm()})).catch((function(e){o.onLoadPanelHiding("Something went wrong","error"),console.log(e)}))})):"cancel"==e.dismiss||e.dismiss}))},o.OnNotification=function(e,a){Object(g.a)({message:e,type:a,displayTime:3e3,position:{at:"top right",offset:"50"}})},o.onLoadPanelHiding=function(e,a){o.setState({LoadPanelVisible:!1}),o.OnNotification(e,a)},o.OnListClickEvent=function(e){o.setState({ListViewing:!o.state.ListViewing},(function(){o.state.ListViewing&&(o.serverRequest=h.a.get("/api/email-list").then((function(e){o.setState({jList:JSON.parse(e.data[0].List)})})).catch((function(e){console.log(e)}))),o.state.ListViewing||0==e||o.setState({EmailID:e,DataLoading:!0},(function(){return o.OnLoadData()}))}))},o.OnLoadData=function(){console.log("X",o.state.EmailID),h.a.all([h.a.get("/api/email",{params:{EmailID:o.state.EmailID}})]).then(h.a.spread((function(e){console.log("Email",e),o.setState({jEmail:e.data[0],MailBody:e.data[0].Message},(function(){h.a.get("/api/module-field",{params:{ModuleID:o.state.jEmail.ModuleID}}).then((function(e){o.setState({jlField:JSON.parse(e.data[0].Fields)})})).catch((function(e){console.log(e)}))}))}))).catch((function(e){return console.log(e)}))},o.OnClearClickEvent=function(e){C.a.fire({type:"info",showCancelButton:!0,text:"Do you want to clear ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){e.value&&o.OnClearForm()}))},o.OnClearForm=function(){o.setState({EmailID:0,jEmail:{},jlField:[],jList:[],FormMode:0,ListViewing:!1,DataLoading:!1,MailBody:{}})},o.valueChanged=function(e){o.setState({MailBody:e.value})},o.state={EmailID:0,jEmail:{},jlSchool:[],jlModule:[],jlField:[],jList:[],FormMode:0,ListViewing:!1,DataLoading:!1,LoadPanelVisible:!1,DocReadOnly:!1,MailBody:"",editorValueType:"html"},o.Status=[{ID:1,Name:"Active"},{ID:0,Name:"Inactive"}],o.sizeValues=["8pt","10pt","12pt","14pt","18pt","24pt","36pt"],o.fontValues=["Arial","Courier New","Georgia","Impact","Lucida Console","Tahoma","Times New Roman","Verdana"],o.headerValues=[!1,1,2,3,4,5],o.FormRef=s.a.createRef(),o}return Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.all([h.a.get("/api/school-lookup"),h.a.get("/api/module-sub-communication")]).then(h.a.spread((function(a,t){e.setState({jlSchool:a.data,jlModule:t.data,DocReadOnly:!1})}))).catch((function(e){return console.log(e)}))}},{key:"FormLayout",get:function(){return this.FormRef.current.instance}},{key:"render",value:function(){return s.a.createElement(m.a,null,s.a.createElement(f.a,{title:"Email Tempalate"},s.a.createElement(u.g,{ref:this.FormRef,formData:this.state.jEmail},s.a.createElement(u.b,{caption:"Infomation",colCount:2},s.a.createElement(u.c,{dataField:"Name",editorOptions:{maxLength:50}},s.a.createElement(u.e,{message:"Field required"})),s.a.createElement(u.c,{dataField:"ModuleID",editorType:"dxSelectBox",editorOptions:{items:this.state.jlModule,searchEnabled:!0,displayExpr:"Name",valueExpr:"ModuleID",onValueChanged:this.onModuleValueChanged}},s.a.createElement(u.d,{text:"Module"}),s.a.createElement(u.e,{message:"Field required"})),s.a.createElement(u.c,{dataField:"Status",editorType:"dxSelectBox",editorOptions:{items:this.Status,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"}},s.a.createElement(u.e,{message:"Field required"})),s.a.createElement(u.c,{dataField:"Remark",editorOptions:{maxLength:50}})),s.a.createElement(u.b,{caption:"Message",colCount:2},s.a.createElement(u.c,{dataField:"Subject",colSpan:2,editorOptions:{maxLength:100}}),s.a.createElement(u.c,{dataField:"Field",editorType:"dxSelectBox",editorOptions:{items:this.state.jlField,searchEnabled:!0,displayExpr:"Value",valueExpr:"Value",onValueChanged:this.onFieldValueChanged}}),s.a.createElement(u.a,null)),s.a.createElement(u.c,{dataField:"Message"},s.a.createElement(y.c,{height:"725px",value:this.state.MailBody,valueType:this.state.editorValueType,onValueChanged:this.valueChanged},s.a.createElement(y.b,null,s.a.createElement(y.a,{formatName:"undo"}),s.a.createElement(y.a,{formatName:"redo"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"size",formatValues:this.sizeValues}),s.a.createElement(y.a,{formatName:"font",formatValues:this.fontValues}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"bold"}),s.a.createElement(y.a,{formatName:"italic"}),s.a.createElement(y.a,{formatName:"strike"}),s.a.createElement(y.a,{formatName:"underline"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"alignLeft"}),s.a.createElement(y.a,{formatName:"alignCenter"}),s.a.createElement(y.a,{formatName:"alignRight"}),s.a.createElement(y.a,{formatName:"alignJustify"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"orderedList"}),s.a.createElement(y.a,{formatName:"bulletList"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"header",formatValues:this.headerValues}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"color"}),s.a.createElement(y.a,{formatName:"background"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"link"}),s.a.createElement(y.a,{formatName:"image"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"clear"}),s.a.createElement(y.a,{formatName:"codeBlock"}),s.a.createElement(y.a,{formatName:"blockquote"}),s.a.createElement(y.a,{formatName:"separator"}),s.a.createElement(y.a,{formatName:"insertTable"}),s.a.createElement(y.a,{formatName:"deleteTable"}),s.a.createElement(y.a,{formatName:"insertRowAbove"}),s.a.createElement(y.a,{formatName:"insertRowBelow"}),s.a.createElement(y.a,{formatName:"deleteRow"}),s.a.createElement(y.a,{formatName:"insertColumnLeft"}),s.a.createElement(y.a,{formatName:"insertColumnRight"}),s.a.createElement(y.a,{formatName:"deleteColumn"})))))),s.a.createElement(v.a,{bg:"light",variant:"light"},s.a.createElement(b.a,{variant:"secondary",onClick:this.OnClickEvent,disabled:this.state.DocReadOnly},"Save"),s.a.createElement(b.a,{variant:"secondary",onClick:this.OnClearClickEvent,icon:"feather icon-layers"},"Clear"),s.a.createElement(b.a,{variant:"secondary",onClick:this.OnListClickEvent},"View List")),s.a.createElement(p.a,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),s.a.createElement(d.a,{Show:this.state.ListViewing,OnHide:this.OnListClickEvent,ItemList:this.state.jList,Name:" Email"}))}}]),t}(c.Component);a.default=Object(O.b)((function(e){return console.log(e.loggedReducer),{data:e.loggedReducer}}))(S)}}]);
//# sourceMappingURL=26.fc745b43.chunk.js.map