(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[27],{452:function(e,t,a){"use strict";var n=a(30),i=a(11),l=a(12),o=a(16),s=a(17),c=a(37),r=a.n(c),d=a(895),u=a(860),m=a(473),h=(a(457),a(367)),p=a(455),f=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,i,l,o=this,s=[];return this.state.isOption&&(a=r.a.createElement("div",{className:"card-header-right"},r.a.createElement(d.a,{alignRight:!0,className:"btn-group card-option"},r.a.createElement(d.a.Toggle,{id:"dropdown-basic",className:"btn-icon"},r.a.createElement("i",{className:"feather icon-more-horizontal"})),r.a.createElement(d.a.Menu,{as:"ul",className:"list-unstyled card-option"},r.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){o.setState((function(e){return{fullCard:!e.fullCard}}))}},r.a.createElement("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),r.a.createElement("a",{href:p.a.BLANK_LINK}," ",this.state.fullCard?"Restore":"Maximize"," ")),r.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){o.setState((function(e){return{collapseCard:!e.collapseCard}}))}},r.a.createElement("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),r.a.createElement("a",{href:p.a.BLANK_LINK}," ",this.state.collapseCard?"Expand":"Collapse"," ")),r.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler},r.a.createElement("i",{className:"feather icon-refresh-cw"}),r.a.createElement("a",{href:p.a.BLANK_LINK}," Reload ")),r.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler},r.a.createElement("i",{className:"feather icon-trash"}),r.a.createElement("a",{href:p.a.BLANK_LINK}," Remove ")))))),i=r.a.createElement(u.a.Header,null,r.a.createElement(u.a.Title,{as:"h5"},this.props.title),a),this.state.fullCard&&(s=[].concat(Object(n.a)(s),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(s=[].concat(Object(n.a)(s),["card-load"]),t=r.a.createElement("div",{className:"card-loader"},r.a.createElement("i",{className:"pct-loader1 anim-rotate"}))),this.state.cardRemove&&(s=[].concat(Object(n.a)(s),["d-none"])),this.props.cardClass&&(s=[].concat(Object(n.a)(s),[this.props.cardClass])),l=r.a.createElement(u.a,{className:s.join(" "),style:e},i,r.a.createElement(m.a,{in:!this.state.collapseCard},r.a.createElement("div",null,r.a.createElement(u.a.Body,{style:{backgroundColor:"rgb(185, 210, 214)"}},this.props.children))),t),r.a.createElement(h.a,null,l)}}]),a}(c.Component);t.a=f},569:function(e,t,a){"use strict";var n=a(11),i=a(12),l=a(16),o=a(17),s=a(37),c=a.n(s),r=a(479),d=a(672),u=a(369),m=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).onSelectionChanged=function(e){i.setState({SelectID:e.selectedRowsData[0].AutoID})},i.onSelectClick=function(e){i.props.OnHide(i.state.SelectID)},i.onCloseClick=function(e){i.props.OnHide(0)},i.state={SelectID:0,jList:[]},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.a.createElement(s.Fragment,null,c.a.createElement(r.a,{size:"xl",show:this.props.Show,onHide:this.onCloseClick,backdrop:"static",keyboard:!1},c.a.createElement(r.a.Header,{closeButton:!0},c.a.createElement(r.a.Title,null,"List of ",this.props.Name)),c.a.createElement(r.a.Body,null,c.a.createElement(u.k,{id:"grid-list",dataSource:this.props.ItemList,keyExpr:"AutoID",showBorders:!0,wordWrapEnabled:!0,allowSearch:!0,selection:{mode:"single"},hoverStateEnabled:!0,onSelectionChanged:this.onSelectionChanged},c.a.createElement(u.j,{visible:!0}),c.a.createElement(u.d,{visible:!0}),c.a.createElement(u.h,{defaultPageSize:20}),c.a.createElement(u.a,{dataField:"AutoID",visible:!1}),c.a.createElement(u.a,{dataField:"Name"}),c.a.createElement(u.a,{dataField:"Module"}),c.a.createElement(u.a,{dataField:"Status"}),c.a.createElement(u.a,{dataField:"Remark"})),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(d.a,{variant:"secondary",onClick:this.onSelectClick},"Open"),c.a.createElement(d.a,{variant:"secondary",onClick:this.onCloseClick,icon:"feather icon-layers"},"Close"))))}}]),a}(s.Component);t.a=m},880:function(e,t,a){"use strict";a.r(t),a.d(t,"CommunicationSMS",(function(){return L}));var n=a(108),i=a(11),l=a(12),o=a(16),s=a(17),c=a(37),r=a.n(c),d=a(367),u=a(569),m=a(370),h=a(452),p=a(368),f=a.n(p),S=a(371),E=a(271),g=a(460),C=a.n(g),v=a(482),O=a(672),b=a(272),L=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var l;return Object(i.a)(this,a),(l=t.call(this,e)).onModuleValueChanged=function(e){e.value&&!l.state.DataLoading&&f.a.get("/api/module-field",{params:{ModuleID:e.value}}).then((function(e){l.setState({jlField:JSON.parse(e.data[0].Fields)})})).catch((function(e){console.log(e)}))},l.onFieldValueChanged=function(e){e.value&&l.setState((function(t){return{jSMS:Object(n.a)(Object(n.a)({},t.jSMS),{},{Message:l.state.jSMS.Message+" #@"+e.value+"# "})}}))},l.OnSaveValidation=function(){return!!l.FormLayout.validate().isValid||(l.OnNotification("Fields marked with * are required","error"),!1)},l.OnClickEvent=function(e){l.OnSaveValidation()&&C.a.fire({type:"info",showCancelButton:!0,text:"Do you want to save ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){e.value?l.setState({LoadPanelVisible:!0},(function(){l.serverRequest=f.a.post("/api/sms",{SMSID:l.state.SMSID,SMS:JSON.stringify(l.state.jSMS)}).then((function(e){console.log("response ",e),l.onLoadPanelHiding("Successfully Saved","success"),l.OnClearForm()})).catch((function(e){l.onLoadPanelHiding("Something went wrong","error"),console.log(e)}))})):"cancel"==e.dismiss||e.dismiss}))},l.OnNotification=function(e,t){Object(E.a)({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},l.onLoadPanelHiding=function(e,t){l.setState({LoadPanelVisible:!1}),l.OnNotification(e,t)},l.OnListClickEvent=function(e){l.setState({ListViewing:!l.state.ListViewing},(function(){l.state.ListViewing&&(l.serverRequest=f.a.get("/api/sms-list").then((function(e){l.setState({jList:JSON.parse(e.data[0].List)})})).catch((function(e){console.log(e)}))),l.state.ListViewing||0==e||l.setState({SMSID:e,DataLoading:!0},(function(){return l.OnLoadData()}))}))},l.OnLoadData=function(){console.log("X",l.state.SMSID),f.a.all([f.a.get("/api/sms",{params:{SMSID:l.state.SMSID}})]).then(f.a.spread((function(e){console.log("SMS",e),l.setState({jSMS:e.data[0]},(function(){f.a.get("/api/module-field",{params:{ModuleID:l.state.jSMS.ModuleID}}).then((function(e){l.setState({jlField:JSON.parse(e.data[0].Fields)})})).catch((function(e){console.log(e)}))}))}))).catch((function(e){return console.log(e)}))},l.OnClearClickEvent=function(e){C.a.fire({type:"info",showCancelButton:!0,text:"Do you want to clear ?",confirmButtonText:"Yes",cancelButtonText:"No",allowOutsideClick:!1,allowEscapeKey:!1}).then((function(e){e.value&&l.OnClearForm()}))},l.OnClearForm=function(){l.setState({SMSID:0,jSMS:{},jlField:[],jList:[],FormMode:0,ListViewing:!1,DataLoading:!1})},l.state={SMSID:0,jSMS:{},jlSchool:[],jlModule:[],jlField:[],jList:[],FormMode:0,ListViewing:!1,DataLoading:!1,LoadPanelVisible:!1,DocReadOnly:!1},l.Status=[{ID:1,Name:"Active"},{ID:0,Name:"Inactive"}],l.FormRef=r.a.createRef(),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.all([f.a.get("/api/school-lookup"),f.a.get("/api/module-sub-communication")]).then(f.a.spread((function(t,a){e.setState({jlSchool:t.data,jlModule:a.data,DocReadOnly:!1})}))).catch((function(e){return console.log(e)}))}},{key:"FormLayout",get:function(){return this.FormRef.current.instance}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(h.a,{title:"SMS Tempalate"},r.a.createElement(m.g,{ref:this.FormRef,formData:this.state.jSMS},r.a.createElement(m.b,{caption:"Infomation",colCount:2},r.a.createElement(m.c,{dataField:"Name",editorOptions:{maxLength:50}},r.a.createElement(m.e,{message:"Field required"})),r.a.createElement(m.c,{dataField:"ModuleID",editorType:"dxSelectBox",editorOptions:{items:this.state.jlModule,searchEnabled:!0,displayExpr:"Name",valueExpr:"ModuleID",onValueChanged:this.onModuleValueChanged}},r.a.createElement(m.d,{text:"Module"}),r.a.createElement(m.e,{message:"Field required"})),r.a.createElement(m.c,{dataField:"Status",editorType:"dxSelectBox",editorOptions:{items:this.Status,searchEnabled:!0,displayExpr:"Name",valueExpr:"ID"}},r.a.createElement(m.e,{message:"Field required"})),r.a.createElement(m.c,{dataField:"Remark",editorOptions:{maxLength:50}})),r.a.createElement(m.b,{caption:"Message",colCount:2},r.a.createElement(m.c,{dataField:"Field",editorType:"dxSelectBox",editorOptions:{items:this.state.jlField,searchEnabled:!0,displayExpr:"Value",valueExpr:"Value",onValueChanged:this.onFieldValueChanged}}),r.a.createElement(m.a,null),r.a.createElement(m.c,{dataField:"Message",editorType:"dxTextArea",colSpan:2,editorOptions:{maxLength:500,height:150}},r.a.createElement(m.e,{message:"Field required"}))))),r.a.createElement(v.a,{bg:"light",variant:"light"},r.a.createElement(O.a,{variant:"secondary",onClick:this.OnClickEvent,disabled:this.state.DocReadOnly},"Save"),r.a.createElement(O.a,{variant:"secondary",onClick:this.OnClearClickEvent,icon:"feather icon-layers"},"Clear"),r.a.createElement(O.a,{variant:"secondary",onClick:this.OnListClickEvent},"View List")),r.a.createElement(S.a,{message:"Processing.... Please, wait...",shadingColor:"rgba(0,0,0,0.4)",onHiding:this.onLoadPanelHiding,visible:this.state.LoadPanelVisible,showIndicator:!0,shading:!0,showPane:!0,closeOnOutsideClick:!1,width:500}),r.a.createElement(u.a,{Show:this.state.ListViewing,OnHide:this.OnListClickEvent,ItemList:this.state.jList,Name:" SMS"}))}}]),a}(c.Component);t.default=Object(b.b)((function(e){return console.log(e.loggedReducer),{data:e.loggedReducer}}))(L)}}]);
//# sourceMappingURL=27.50a2f0cd.chunk.js.map