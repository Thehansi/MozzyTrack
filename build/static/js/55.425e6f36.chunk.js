/*! For license information please see 55.425e6f36.chunk.js.LICENSE.txt */
(this["webpackJsonpdatta-able-rv18.0.4"]=this["webpackJsonpdatta-able-rv18.0.4"]||[]).push([[55],{885:function(e,t,r){"use strict";r.r(t);var n=r(108),a=r(456),i=r(49),s=r(37),o=r.n(s),c=r(370),l=r(369),d=r(672),u=r(482),f=r(368),U=r.n(f),p=r(460),v=r.n(p),h=r(271),y=r(374);function m(){m=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof h?t:h,s=Object.create(i.prototype),o=new k(n||[]);return a(s,"_invoke",{value:H(e,r,o)}),s}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",U="executing",p="completed",v={};function h(){}function y(){}function g(){}var E={};l(E,s,(function(){return this}));var b=Object.getPrototypeOf,A=b&&b(b(P([])));A&&A!==r&&n.call(A,s)&&(E=A);var w=g.prototype=h.prototype=Object.create(E);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,s,o){var c=u(e[a],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,o)}))}o(c.arg)}var i;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return i=i?i.then(a,a):a()}})}function H(t,r,n){var a=f;return function(i,s){if(a===U)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw s;return{value:e,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var c=O(o,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=U;var l=u(t,r,n);if("normal"===l.type){if(a=n.done?p:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function O(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=u(a,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var s=i.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},C(x.prototype),l(x.prototype,o,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var s=new x(d(e,r,n,a),i);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(w),l(w,c,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return o.type="throw",o.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}t.default=function(){var e,t,r,f,p=Object(s.useState)({}),g=Object(i.a)(p,2),E=g[0],b=g[1],A=Object(s.useState)({}),w=Object(i.a)(A,2),C=w[0],x=w[1],H=Object(s.useState)({jUser:{userNameUpdate:""}}),O=Object(i.a)(H,2),j=O[0],L=O[1],k=Object(s.useState)({permissions:[],LoadPanelVisible:!1}),P=Object(i.a)(k,2),S=P[0],N=P[1],I=Object(s.useState)(!0),R=Object(i.a)(I,2),D=R[0],_=R[1],F=Object(s.useState)(!0),M=Object(i.a)(F,2),T=(M[0],M[1]),G=Object(s.useState)(!0),q=Object(i.a)(G,2),B=(q[0],q[1]),V=Object(s.useState)(!0),J=Object(i.a)(V,2),W=J[0],K=J[1],Y=Object(s.useRef)(null);Y.current&&Y.current.instance;Object(s.useEffect)((function(){z()}),[]);var z=function(){return(e=e||Object(a.a)(m().mark((function e(){var t,r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("user")),e.next=3,U.a.get("/api/CheckUserAuthentication",{params:{UsersID:t.UserName,MenuID:9003}});case 3:if(r=e.sent,x(t.UserName),0==r.data.length){e.next=20;break}if(!r.data[0].UserView){e.next=18;break}return B(!1),e.prev=8,e.next=11,U.a.get("/api/getallUserNameforPermission");case 11:n=e.sent,b(n.data),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.error("Error fetching details:",e.t0);case 18:r.data[0].UserAdd&&_(!1),r.data[0].UserEdit&&T(!1);case 20:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)},Q=function(e,t){Object(h.a)({message:e,type:t,displayTime:3e3,position:{at:"top right",offset:"50"}})},X=function(){return(t=t||Object(a.a)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("awa 2"),""!=j.jUser.UserName&&NaN!=j.jUser.UserName&&void 0!=j.jUser.UserName){e.next=4;break}return Q("User Name is Required","error"),e.abrupt("return",!1);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Z=function(e,t){return[{activity:"Dashboard",fields:["UserAdd","UserCancel","UserHold"]},{activity:"Inventory Master",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Warehouse Master",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Supplier Master",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Inventory Warehouse Master",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Unit of Measure",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"PR Type",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Create User Branch",fields:["UserCancel","UserHold"]},{activity:"Create User Group",fields:["UserCancel","UserHold"]},{activity:"Create User Department",fields:["UserCancel","UserHold"]},{activity:"Requisition List (Summery)",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Requisition List (Item Details)",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Requisition History Log (Summery)",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Requisition History Log (Details)",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Pending Documents",fields:["UserAdd","UserCancel","UserHold"]},{activity:"Pending Approval List",fields:["UserAdd","UserCancel","UserHold"]},{activity:"KPI",fields:["UserHold","UserCancel"]},{activity:"Report",fields:["UserAdd","UserEdit","UserCancel","UserHold"]},{activity:"Users",fields:["UserCancel","UserHold"]},{activity:"User Permission",fields:["UserCancel","UserHold"]},{activity:"Approval Level",fields:["UserCancel","UserHold"]},{activity:"Approval Level Mapping",fields:["UserCancel","UserHold"]},{activity:"Password Reset",fields:["UserAdd","UserCancel","UserHold"]}].some((function(r){return r.activity===e.Activity&&r.fields.includes(t)}))},$=function(e,t,r){var n=S.permissions;return console.log("permisionData",n),console.log("value",r),n[e][t]=r,console.log("permisionData after",n),N({permissions:n}),n},ee=function(e,t,r){var n=!1,a=t,i=r;return("Dashboard"!=e.Activity||"UserAdd"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Inventory Master"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Warehouse Master"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Supplier Master"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Inventory Warehouse Master"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Unit of Measure"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("PR Type"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Create User Branch"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("Create User Group"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("Create User Department"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("Requisition List (Summery)"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Requisition List (Item Details)"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Requisition History Log (Summery)"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Requisition History Log (Details)"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Pending Documents"!=e.Activity||"UserAdd"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Pending Approval List"!=e.Activity||"UserAdd"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("KPI"!=e.Activity||"UserHold"!=r&&"UserCancel"!=r)&&("Report"!=e.Activity||"UserAdd"!=r&&"UserEdit"!=r&&"UserCancel"!=r&&"UserHold"!=r)&&("Users"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("User Permission"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("Approval Level"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("Approval Level Mapping"!=e.Activity||"UserCancel"!=r&&"UserHold"!=r)&&("Password Reset"!=e.Activity||"UserAdd"!=r&&"UserCancel"!=r&&"UserHold"!=r)||(a=-1,i="CHANGE",n=!0),o.a.createElement(y.a,{value:1==e[r],onValueChanged:function(e){return $(t,r,!n&&e.value)},disabled:n,style:-1===a&&"CHANGE"===i?{backgroundColor:"#000000",color:"white"}:{}})};return o.a.createElement("div",null,o.a.createElement(c.g,{ref:Y,formData:j.jUser},o.a.createElement(c.b,{caption:"Permission",colCount:2},o.a.createElement(c.c,{dataField:"UserName",editorType:"dxSelectBox",editorOptions:{searchEnabled:!0,dataSource:E,valueExpr:"UserName",displayExpr:"UserName",maxLength:50,onValueChanged:function(e){return(f=f||Object(a.a)(m().mark((function e(t){var r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t.value){e.next=14;break}return e.next=3,U.a.get("/api/getUserPermissionDetails",{params:{UsersID:t.value}});case 3:if(r=e.sent,console.log("permissions",r.data),K(!1),!(r.data.length>0)){e.next=10;break}N({permissions:r.data}),e.next=14;break;case 10:return e.next=12,U.a.get("/api/userPermission_Activity_Load");case 12:n=e.sent,N({permissions:n.data});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}},o.a.createElement(c.e,{message:"Field required"}),o.a.createElement(c.d,{text:"Username"})),o.a.createElement(c.c,null,o.a.createElement(d.a,{variant:"secondary",onClick:function(){var e=S.permissions.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{UserView:!0,UserAdd:!Z(e,"UserAdd")||e.UserAdd,UserEdit:!Z(e,"UserEdit")||e.UserEdit,UserCancel:!Z(e,"UserCancel")||e.UserCancel,UserHold:!Z(e,"UserHold")||e.UserHold})}));N({permissions:e})},disabled:W},"Select All"),o.a.createElement(d.a,{variant:"secondary",onClick:function(){var e=S.permissions.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{UserView:!1,UserAdd:!1,UserEdit:!1,UserCancel:!1,UserHold:!1})}));N({permissions:e})},disabled:W},"Clear")))),o.a.createElement(l.k,{id:"Approval",allowColumnReordering:!0,showBorders:!0,wordWrapEnabled:!0,hoverStateEnabled:!0,dataSource:S.permissions},o.a.createElement(l.h,{enabled:!1}),o.a.createElement(l.a,{dataField:"Activity",caption:"Activity",editorOptions:{readOnly:!0}}),o.a.createElement(l.a,{dataField:"MenuID",caption:"Menu ID",visible:!1,editorOptions:{readOnly:!0}}),o.a.createElement(l.a,{dataField:"UserView",caption:"View",cellRender:function(e){var t=e.data,r=e.rowIndex;return ee(t,r,"UserView")}}),o.a.createElement(l.a,{dataField:"UserAdd",caption:"Add",cellRender:function(e){var t=e.data,r=e.rowIndex;return ee(t,r,"UserAdd")}}),o.a.createElement(l.a,{dataField:"UserEdit",caption:"Edit",cellRender:function(e){var t=e.data,r=e.rowIndex;return ee(t,r,"UserEdit")}}),o.a.createElement(l.a,{dataField:"UserCancel",caption:"Cancel",cellRender:function(e){var t=e.data,r=e.rowIndex;return ee(t,r,"UserCancel")}}),o.a.createElement(l.a,{dataField:"UserHold",caption:"Hold",cellRender:function(e){var t=e.data,r=e.rowIndex;return ee(t,r,"UserHold")}}),o.a.createElement(l.a,{dataField:"UserPrint",caption:"Print",editorType:"dxCheckBox",visible:!1})),o.a.createElement(u.a,{bg:"light",variant:"light"},o.a.createElement(d.a,{variant:"secondary",onClick:function(){return(r=r||Object(a.a)(m().mark((function e(){var t,r,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(!e.sent){e.next=16;break}return t=j.jUser.UserName,e.prev=4,e.next=7,U.a.post("/api/addPermission",{permission:JSON.stringify(S.permissions),permissionHeader:JSON.stringify(j.jUser),UsersID:t,UserID:C});case 7:n=e.sent,console.log(n.data),v.a.fire({icon:"success",title:"Success",text:"User Permission details saved successfully!"}).then((function(e){return(r=r||Object(a.a)(m().mark((function e(t){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/api/userPermission_Activity_Load");case 3:r=e.sent,N({permissions:r.data}),L({jUser:{}}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error:",e.t0),v.a.fire({icon:"error",title:'<span style="color: red;">Error!</span>',text:"Failed to load User Permission details",confirmButtonColor:"#d33",confirmButtonText:"OK"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error:",e.t0),v.a.fire({icon:"error",title:'<span style="color: red;">Error!</span>',text:"Failed to save User Permission details",confirmButtonColor:"#d33",confirmButtonText:"OK"});case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)},disabled:D},"Save")))}}}]);
//# sourceMappingURL=55.425e6f36.chunk.js.map